(function () {
    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
    var __module = nodeEnv ? module : { exports: {} };
    var __filename = 'engine-dev/cocos2d/core/renderer/webgl/assemblers/sprite/3d/bar-filled.js';
    var __require = nodeEnv ? function (request) {
        return require(request);
    } : function (request) {
        return __quick_compile__.require(request, __filename);
    };
    function __define(exports, require, module) {
        if (!nodeEnv) {
            __quick_compile__.registerModule(__filename, module);
        }
                'use strict';
        var js = require('../../../../../platform/js');
        var assembler = require('../2d/bar-filled');
        var fillVerticesWithoutCalc3D = require('../../utils').fillVerticesWithoutCalc3D;
        var vec3 = cc.vmath.vec3;
        module.exports = js.addon({
            updateWorldVerts: function updateWorldVerts(sprite) {
                var node = sprite.node, data = sprite._renderData._data;
                var matrix = node._worldMatrix;
                for (var i = 0; i < 4; i++) {
                    var local = data[i + 4];
                    var world = data[i];
                    vec3.transformMat4(world, local, matrix);
                }
            },
            fillBuffers: function fillBuffers(sprite, renderer) {
                if (renderer.worldMatDirty) {
                    this.updateWorldVerts(sprite);
                }
                var buffer = renderer._meshBuffer3D;
                var node = sprite.node;
                var offsetInfo = fillVerticesWithoutCalc3D(node, buffer, sprite._renderData, node._color._val);
                var ibuf = buffer._iData, indiceOffset = offsetInfo.indiceOffset, vertexId = offsetInfo.vertexOffset;
                ibuf[indiceOffset++] = vertexId;
                ibuf[indiceOffset++] = vertexId + 1;
                ibuf[indiceOffset++] = vertexId + 2;
                ibuf[indiceOffset++] = vertexId + 1;
                ibuf[indiceOffset++] = vertexId + 3;
                ibuf[indiceOffset++] = vertexId + 2;
            }
        }, assembler);
    }
    if (nodeEnv) {
        __define(__module.exports, __require, __module);
    } else {
        __quick_compile__.registerModuleFunc(__filename, function () {
            __define(__module.exports, __require, __module);
        });
    }
}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhci1maWxsZWQuanMiLCIvVXNlcnMvenpmMjAxOS9EZXNrdG9wL2RldmVsb3BtZW50L3N1cHBvcnRfYXN0Yy9lbmdpbmUvY29jb3MyZC9jb3JlL3JlbmRlcmVyL3dlYmdsL2Fzc2VtYmxlcnMvc3ByaXRlLzNkL2Jhci1maWxsZWQuanMiXSwibmFtZXMiOlsianMiLCJyZXF1aXJlIiwiYXNzZW1ibGVyIiwiZmlsbFZlcnRpY2VzV2l0aG91dENhbGMzRCIsInZlYzMiLCJjYyIsInZtYXRoIiwibW9kdWxlIiwiZXhwb3J0cyIsImFkZG9uIiwidXBkYXRlV29ybGRWZXJ0cyIsInNwcml0ZSIsIm5vZGUiLCJkYXRhIiwiX3JlbmRlckRhdGEiLCJfZGF0YSIsIm1hdHJpeCIsIl93b3JsZE1hdHJpeCIsImkiLCJsb2NhbCIsIndvcmxkIiwidHJhbnNmb3JtTWF0NCIsImZpbGxCdWZmZXJzIiwicmVuZGVyZXIiLCJ3b3JsZE1hdERpcnR5IiwiYnVmZmVyIiwiX21lc2hCdWZmZXIzRCIsIm9mZnNldEluZm8iLCJfY29sb3IiLCJfdmFsIiwiaWJ1ZiIsIl9pRGF0YSIsImluZGljZU9mZnNldCIsInZlcnRleElkIiwidmVydGV4T2Zmc2V0Il0sIm1hcHBpbmdzIjoiO0lBQUEsSUFBQSxPQUFBLEdBQUEsT0FBQSxPQUFBLEtBQUEsV0FBQSxJQUFBLE9BQUEsT0FBQSxLQUFBLFdBQUE7Ozs7Ozs7Ozs7Ozs7UUF5QkEsSUFBTUEsRUFBQUEsR0FBS0MsT0FBQUEsQ0FBUSw0QkFBUkEsQ0FBWDtRQUNBLElBQU1DLFNBQUFBLEdBQVlELE9BQUFBLENBQVEsa0JBQVJBLENBQWxCO1FBQ0EsSUFBTUUseUJBQUFBLEdBQTRCRixPQUFBQSxDQUFRLGFBQVJBLEVBQXVCRSx5QkFBekQ7UUFFQSxJQUFNQyxJQUFBQSxHQUFPQyxFQUFBQSxDQUFHQyxLQUFIRCxDQUFTRCxJQUF0QjtRQUVBRyxNQUFBQSxDQUFPQyxPQUFQRCxHQUFpQlAsRUFBQUEsQ0FBR1MsS0FBSFQsQ0FBUztBQUFBLFlBQ3RCVSxnQkFBQUEsRUFEc0IsU0FBQSxnQkFBQSxDQUNKQyxNQURJLEVBQ0k7QUFBQSxnQkFDdEIsSUFBSUMsSUFBQUEsR0FBT0QsTUFBQUEsQ0FBT0MsSUFBbEIsRUFDSUMsSUFBQUEsR0FBT0YsTUFBQUEsQ0FBT0csV0FBUEgsQ0FBbUJJLEtBRDlCLENBRHNCO0FBQUEsZ0JBSXRCLElBQUlDLE1BQUFBLEdBQVNKLElBQUFBLENBQUtLLFlBQWxCLENBSnNCO0FBQUEsZ0JBS3RCLEtBQUssSUFBSUMsQ0FBQUEsR0FBSSxDQUFSLENBQUwsQ0FBZ0JBLENBQUFBLEdBQUksQ0FBcEIsRUFBdUJBLENBQUFBLEVBQXZCLEVBQTRCO0FBQUEsb0JBQ3hCLElBQUlDLEtBQUFBLEdBQVFOLElBQUFBLENBQUtLLENBQUFBLEdBQUksQ0FBVEwsQ0FBWixDQUR3QjtBQUFBLG9CQUV4QixJQUFJTyxLQUFBQSxHQUFRUCxJQUFBQSxDQUFLSyxDQUFMTCxDQUFaLENBRndCO0FBQUEsb0JBR3hCVCxJQUFBQSxDQUFLaUIsYUFBTGpCLENBQW1CZ0IsS0FBbkJoQixFQUEwQmUsS0FBMUJmLEVBQWlDWSxNQUFqQ1osRUFId0I7QUFBQSxpQkFMTjtBQUFBLGFBREo7QUFBQSxZQWF0QmtCLFdBQUFBLEVBYnNCLFNBQUEsV0FBQSxDQWFUWCxNQWJTLEVBYURZLFFBYkMsRUFhUztBQUFBLGdCQUMzQixJQUFJQSxRQUFBQSxDQUFTQyxhQUFiLEVBQTRCO0FBQUEsb0JBQ3hCLEtBQUtkLGdCQUFMLENBQXNCQyxNQUF0QixFQUR3QjtBQUFBLGlCQUREO0FBQUEsZ0JBTTNCLElBQUljLE1BQUFBLEdBQVNGLFFBQUFBLENBQVNHLGFBQXRCLENBTjJCO0FBQUEsZ0JBTzNCLElBQUlkLElBQUFBLEdBQU9ELE1BQUFBLENBQU9DLElBQWxCLENBUDJCO0FBQUEsZ0JBUTNCLElBQUllLFVBQUFBLEdBQWF4Qix5QkFBQUEsQ0FBMEJTLElBQTFCVCxFQUFnQ3NCLE1BQWhDdEIsRUFBd0NRLE1BQUFBLENBQU9HLFdBQS9DWCxFQUE0RFMsSUFBQUEsQ0FBS2dCLE1BQUxoQixDQUFZaUIsSUFBeEUxQixDQUFqQixDQVIyQjtBQUFBLGdCQVUzQixJQUFJMkIsSUFBQUEsR0FBT0wsTUFBQUEsQ0FBT00sTUFBbEIsRUFDSUMsWUFBQUEsR0FBZUwsVUFBQUEsQ0FBV0ssWUFEOUIsRUFFSUMsUUFBQUEsR0FBV04sVUFBQUEsQ0FBV08sWUFGMUIsQ0FWMkI7QUFBQSxnQkFjM0JKLElBQUFBLENBQUtFLFlBQUFBLEVBQUxGLElBQXVCRyxRQUF2QkgsQ0FkMkI7QUFBQSxnQkFlM0JBLElBQUFBLENBQUtFLFlBQUFBLEVBQUxGLElBQXVCRyxRQUFBQSxHQUFXLENBQWxDSCxDQWYyQjtBQUFBLGdCQWdCM0JBLElBQUFBLENBQUtFLFlBQUFBLEVBQUxGLElBQXVCRyxRQUFBQSxHQUFXLENBQWxDSCxDQWhCMkI7QUFBQSxnQkFpQjNCQSxJQUFBQSxDQUFLRSxZQUFBQSxFQUFMRixJQUF1QkcsUUFBQUEsR0FBVyxDQUFsQ0gsQ0FqQjJCO0FBQUEsZ0JBa0IzQkEsSUFBQUEsQ0FBS0UsWUFBQUEsRUFBTEYsSUFBdUJHLFFBQUFBLEdBQVcsQ0FBbENILENBbEIyQjtBQUFBLGdCQW1CM0JBLElBQUFBLENBQUtFLFlBQUFBLEVBQUxGLElBQXVCRyxRQUFBQSxHQUFXLENBQWxDSCxDQW5CMkI7QUFBQSxhQWJUO0FBQUEsU0FBVDlCLEVBa0NkRSxTQWxDY0YsQ0FBakJPIiwiZmlsZSI6ImJhci1maWxsZWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuIENvcHlyaWdodCAoYykgMjAxNy0yMDE4IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxuXG4gaHR0cHM6Ly93d3cuY29jb3MuY29tL1xuXG4gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZW5naW5lIHNvdXJjZSBjb2RlICh0aGUgXCJTb2Z0d2FyZVwiKSwgYSBsaW1pdGVkLFxuIHdvcmxkd2lkZSwgcm95YWx0eS1mcmVlLCBub24tYXNzaWduYWJsZSwgcmV2b2NhYmxlIGFuZCBub24tZXhjbHVzaXZlIGxpY2Vuc2VcbiB0byB1c2UgQ29jb3MgQ3JlYXRvciBzb2xlbHkgdG8gZGV2ZWxvcCBnYW1lcyBvbiB5b3VyIHRhcmdldCBwbGF0Zm9ybXMuIFlvdSBzaGFsbFxuIG5vdCB1c2UgQ29jb3MgQ3JlYXRvciBzb2Z0d2FyZSBmb3IgZGV2ZWxvcGluZyBvdGhlciBzb2Z0d2FyZSBvciB0b29scyB0aGF0J3NcbiB1c2VkIGZvciBkZXZlbG9waW5nIGdhbWVzLiBZb3UgYXJlIG5vdCBncmFudGVkIHRvIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsXG4gc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIENvY29zIENyZWF0b3IuXG5cbiBUaGUgc29mdHdhcmUgb3IgdG9vbHMgaW4gdGhpcyBMaWNlbnNlIEFncmVlbWVudCBhcmUgbGljZW5zZWQsIG5vdCBzb2xkLlxuIFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLiByZXNlcnZlcyBhbGwgcmlnaHRzIG5vdCBleHByZXNzbHkgZ3JhbnRlZCB0byB5b3UuXG5cbiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuIFRIRSBTT0ZUV0FSRS5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5jb25zdCBqcyA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uLy4uL3BsYXRmb3JtL2pzJyk7XG5jb25zdCBhc3NlbWJsZXIgPSByZXF1aXJlKCcuLi8yZC9iYXItZmlsbGVkJyk7XG5jb25zdCBmaWxsVmVydGljZXNXaXRob3V0Q2FsYzNEID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMnKS5maWxsVmVydGljZXNXaXRob3V0Q2FsYzNEO1xuXG5jb25zdCB2ZWMzID0gY2Mudm1hdGgudmVjMztcblxubW9kdWxlLmV4cG9ydHMgPSBqcy5hZGRvbih7XG4gICAgdXBkYXRlV29ybGRWZXJ0cyAoc3ByaXRlKSB7XG4gICAgICAgIGxldCBub2RlID0gc3ByaXRlLm5vZGUsXG4gICAgICAgICAgICBkYXRhID0gc3ByaXRlLl9yZW5kZXJEYXRhLl9kYXRhO1xuXG4gICAgICAgIGxldCBtYXRyaXggPSBub2RlLl93b3JsZE1hdHJpeDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgICAgIGxldCBsb2NhbCA9IGRhdGFbaSArIDRdO1xuICAgICAgICAgICAgbGV0IHdvcmxkID0gZGF0YVtpXTtcbiAgICAgICAgICAgIHZlYzMudHJhbnNmb3JtTWF0NCh3b3JsZCwgbG9jYWwsIG1hdHJpeCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZmlsbEJ1ZmZlcnMgKHNwcml0ZSwgcmVuZGVyZXIpIHtcbiAgICAgICAgaWYgKHJlbmRlcmVyLndvcmxkTWF0RGlydHkpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlV29ybGRWZXJ0cyhzcHJpdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYnVmZmVyXG4gICAgICAgIGxldCBidWZmZXIgPSByZW5kZXJlci5fbWVzaEJ1ZmZlcjNEO1xuICAgICAgICBsZXQgbm9kZSA9IHNwcml0ZS5ub2RlO1xuICAgICAgICBsZXQgb2Zmc2V0SW5mbyA9IGZpbGxWZXJ0aWNlc1dpdGhvdXRDYWxjM0Qobm9kZSwgYnVmZmVyLCBzcHJpdGUuX3JlbmRlckRhdGEsIG5vZGUuX2NvbG9yLl92YWwpO1xuXG4gICAgICAgIGxldCBpYnVmID0gYnVmZmVyLl9pRGF0YSxcbiAgICAgICAgICAgIGluZGljZU9mZnNldCA9IG9mZnNldEluZm8uaW5kaWNlT2Zmc2V0LFxuICAgICAgICAgICAgdmVydGV4SWQgPSBvZmZzZXRJbmZvLnZlcnRleE9mZnNldDtcblxuICAgICAgICBpYnVmW2luZGljZU9mZnNldCsrXSA9IHZlcnRleElkO1xuICAgICAgICBpYnVmW2luZGljZU9mZnNldCsrXSA9IHZlcnRleElkICsgMTtcbiAgICAgICAgaWJ1ZltpbmRpY2VPZmZzZXQrK10gPSB2ZXJ0ZXhJZCArIDI7XG4gICAgICAgIGlidWZbaW5kaWNlT2Zmc2V0KytdID0gdmVydGV4SWQgKyAxO1xuICAgICAgICBpYnVmW2luZGljZU9mZnNldCsrXSA9IHZlcnRleElkICsgMztcbiAgICAgICAgaWJ1ZltpbmRpY2VPZmZzZXQrK10gPSB2ZXJ0ZXhJZCArIDI7XG4gICAgfVxufSwgYXNzZW1ibGVyKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiBDb3B5cmlnaHQgKGMpIDIwMTctMjAxOCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cblxuIGh0dHBzOi8vd3d3LmNvY29zLmNvbS9cblxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGVuZ2luZSBzb3VyY2UgY29kZSAodGhlIFwiU29mdHdhcmVcIiksIGEgbGltaXRlZCxcbiB3b3JsZHdpZGUsIHJveWFsdHktZnJlZSwgbm9uLWFzc2lnbmFibGUsIHJldm9jYWJsZSBhbmQgbm9uLWV4Y2x1c2l2ZSBsaWNlbnNlXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcbiBub3QgdXNlIENvY29zIENyZWF0b3Igc29mdHdhcmUgZm9yIGRldmVsb3Bpbmcgb3RoZXIgc29mdHdhcmUgb3IgdG9vbHMgdGhhdCdzXG4gdXNlZCBmb3IgZGV2ZWxvcGluZyBnYW1lcy4gWW91IGFyZSBub3QgZ3JhbnRlZCB0byBwdWJsaXNoLCBkaXN0cmlidXRlLFxuIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxuXG4gVGhlIHNvZnR3YXJlIG9yIHRvb2xzIGluIHRoaXMgTGljZW5zZSBBZ3JlZW1lbnQgYXJlIGxpY2Vuc2VkLCBub3Qgc29sZC5cbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxuXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiBUSEUgU09GVFdBUkUuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxudmFyIGpzID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vcGxhdGZvcm0vanMnKTtcbnZhciBhc3NlbWJsZXIgPSByZXF1aXJlKCcuLi8yZC9iYXItZmlsbGVkJyk7XG52YXIgZmlsbFZlcnRpY2VzV2l0aG91dENhbGMzRCA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzJykuZmlsbFZlcnRpY2VzV2l0aG91dENhbGMzRDtcblxudmFyIHZlYzMgPSBjYy52bWF0aC52ZWMzO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGpzLmFkZG9uKHtcbiAgICB1cGRhdGVXb3JsZFZlcnRzOiBmdW5jdGlvbiB1cGRhdGVXb3JsZFZlcnRzKHNwcml0ZSkge1xuICAgICAgICB2YXIgbm9kZSA9IHNwcml0ZS5ub2RlLFxuICAgICAgICAgICAgZGF0YSA9IHNwcml0ZS5fcmVuZGVyRGF0YS5fZGF0YTtcblxuICAgICAgICB2YXIgbWF0cml4ID0gbm9kZS5fd29ybGRNYXRyaXg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbG9jYWwgPSBkYXRhW2kgKyA0XTtcbiAgICAgICAgICAgIHZhciB3b3JsZCA9IGRhdGFbaV07XG4gICAgICAgICAgICB2ZWMzLnRyYW5zZm9ybU1hdDQod29ybGQsIGxvY2FsLCBtYXRyaXgpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBmaWxsQnVmZmVyczogZnVuY3Rpb24gZmlsbEJ1ZmZlcnMoc3ByaXRlLCByZW5kZXJlcikge1xuICAgICAgICBpZiAocmVuZGVyZXIud29ybGRNYXREaXJ0eSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVXb3JsZFZlcnRzKHNwcml0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBidWZmZXJcbiAgICAgICAgdmFyIGJ1ZmZlciA9IHJlbmRlcmVyLl9tZXNoQnVmZmVyM0Q7XG4gICAgICAgIHZhciBub2RlID0gc3ByaXRlLm5vZGU7XG4gICAgICAgIHZhciBvZmZzZXRJbmZvID0gZmlsbFZlcnRpY2VzV2l0aG91dENhbGMzRChub2RlLCBidWZmZXIsIHNwcml0ZS5fcmVuZGVyRGF0YSwgbm9kZS5fY29sb3IuX3ZhbCk7XG5cbiAgICAgICAgdmFyIGlidWYgPSBidWZmZXIuX2lEYXRhLFxuICAgICAgICAgICAgaW5kaWNlT2Zmc2V0ID0gb2Zmc2V0SW5mby5pbmRpY2VPZmZzZXQsXG4gICAgICAgICAgICB2ZXJ0ZXhJZCA9IG9mZnNldEluZm8udmVydGV4T2Zmc2V0O1xuXG4gICAgICAgIGlidWZbaW5kaWNlT2Zmc2V0KytdID0gdmVydGV4SWQ7XG4gICAgICAgIGlidWZbaW5kaWNlT2Zmc2V0KytdID0gdmVydGV4SWQgKyAxO1xuICAgICAgICBpYnVmW2luZGljZU9mZnNldCsrXSA9IHZlcnRleElkICsgMjtcbiAgICAgICAgaWJ1ZltpbmRpY2VPZmZzZXQrK10gPSB2ZXJ0ZXhJZCArIDE7XG4gICAgICAgIGlidWZbaW5kaWNlT2Zmc2V0KytdID0gdmVydGV4SWQgKyAzO1xuICAgICAgICBpYnVmW2luZGljZU9mZnNldCsrXSA9IHZlcnRleElkICsgMjtcbiAgICB9XG59LCBhc3NlbWJsZXIpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSW1KaGNpMW1hV3hzWldRdWFuTWlYU3dpYm1GdFpYTWlPbHNpYW5NaUxDSnlaWEYxYVhKbElpd2lZWE56WlcxaWJHVnlJaXdpWm1sc2JGWmxjblJwWTJWelYybDBhRzkxZEVOaGJHTXpSQ0lzSW5abFl6TWlMQ0pqWXlJc0luWnRZWFJvSWl3aWJXOWtkV3hsSWl3aVpYaHdiM0owY3lJc0ltRmtaRzl1SWl3aWRYQmtZWFJsVjI5eWJHUldaWEowY3lJc0luTndjbWwwWlNJc0ltNXZaR1VpTENKa1lYUmhJaXdpWDNKbGJtUmxja1JoZEdFaUxDSmZaR0YwWVNJc0ltMWhkSEpwZUNJc0lsOTNiM0pzWkUxaGRISnBlQ0lzSW1raUxDSnNiMk5oYkNJc0luZHZjbXhrSWl3aWRISmhibk5tYjNKdFRXRjBOQ0lzSW1acGJHeENkV1ptWlhKeklpd2ljbVZ1WkdWeVpYSWlMQ0ozYjNKc1pFMWhkRVJwY25SNUlpd2lZblZtWm1WeUlpd2lYMjFsYzJoQ2RXWm1aWEl6UkNJc0ltOW1abk5sZEVsdVptOGlMQ0pmWTI5c2IzSWlMQ0pmZG1Gc0lpd2lhV0oxWmlJc0lsOXBSR0YwWVNJc0ltbHVaR2xqWlU5bVpuTmxkQ0lzSW5abGNuUmxlRWxrSWl3aWRtVnlkR1Y0VDJabWMyVjBJbDBzSW0xaGNIQnBibWR6SWpvaU96dEJRVUZCT3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPMEZCZVVKQkxFbEJRVTFCTEV0QlFVdERMRkZCUVZFc05FSkJRVklzUTBGQldEdEJRVU5CTEVsQlFVMURMRmxCUVZsRUxGRkJRVkVzYTBKQlFWSXNRMEZCYkVJN1FVRkRRU3hKUVVGTlJTdzBRa0ZCTkVKR0xGRkJRVkVzWVVGQlVpeEZRVUYxUWtVc2VVSkJRWHBFT3p0QlFVVkJMRWxCUVUxRExFOUJRVTlETEVkQlFVZERMRXRCUVVnc1EwRkJVMFlzU1VGQmRFSTdPMEZCUlVGSExFOUJRVTlETEU5QlFWQXNSMEZCYVVKU0xFZEJRVWRUTEV0QlFVZ3NRMEZCVXp0QlFVTjBRa01zYjBKQlJITkNMRFJDUVVOS1F5eE5RVVJKTEVWQlEwazdRVUZEZEVJc1dVRkJTVU1zVDBGQlQwUXNUMEZCVDBNc1NVRkJiRUk3UVVGQlFTeFpRVU5KUXl4UFFVRlBSaXhQUVVGUFJ5eFhRVUZRTEVOQlFXMUNReXhMUVVRNVFqczdRVUZIUVN4WlFVRkpReXhUUVVGVFNpeExRVUZMU3l4WlFVRnNRanRCUVVOQkxHRkJRVXNzU1VGQlNVTXNTVUZCU1N4RFFVRmlMRVZCUVdkQ1FTeEpRVUZKTEVOQlFYQkNMRVZCUVhWQ1FTeEhRVUYyUWl4RlFVRTBRanRCUVVONFFpeG5Ra0ZCU1VNc1VVRkJVVTRzUzBGQlMwc3NTVUZCU1N4RFFVRlVMRU5CUVZvN1FVRkRRU3huUWtGQlNVVXNVVUZCVVZBc1MwRkJTMHNzUTBGQlRDeERRVUZhTzBGQlEwRmtMR2xDUVVGTGFVSXNZVUZCVEN4RFFVRnRRa1FzUzBGQmJrSXNSVUZCTUVKRUxFdEJRVEZDTEVWQlFXbERTQ3hOUVVGcVF6dEJRVU5JTzBGQlEwb3NTMEZZY1VJN1FVRmhkRUpOTEdWQlluTkNMSFZDUVdGVVdDeE5RV0pUTEVWQllVUlpMRkZCWWtNc1JVRmhVenRCUVVNelFpeFpRVUZKUVN4VFFVRlRReXhoUVVGaUxFVkJRVFJDTzBGQlEzaENMR2xDUVVGTFpDeG5Ra0ZCVEN4RFFVRnpRa01zVFVGQmRFSTdRVUZEU0RzN1FVRkZSRHRCUVVOQkxGbEJRVWxqTEZOQlFWTkdMRk5CUVZOSExHRkJRWFJDTzBGQlEwRXNXVUZCU1dRc1QwRkJUMFFzVDBGQlQwTXNTVUZCYkVJN1FVRkRRU3haUVVGSlpTeGhRVUZoZUVJc01FSkJRVEJDVXl4SlFVRXhRaXhGUVVGblEyRXNUVUZCYUVNc1JVRkJkME5rTEU5QlFVOUhMRmRCUVM5RExFVkJRVFJFUml4TFFVRkxaMElzVFVGQlRDeERRVUZaUXl4SlFVRjRSU3hEUVVGcVFqczdRVUZGUVN4WlFVRkpReXhQUVVGUFRDeFBRVUZQVFN4TlFVRnNRanRCUVVGQkxGbEJRMGxETEdWQlFXVk1MRmRCUVZkTExGbEJSRGxDTzBGQlFVRXNXVUZGU1VNc1YwRkJWMDRzVjBGQlYwOHNXVUZHTVVJN08wRkJTVUZLTEdGQlFVdEZMR05CUVV3c1NVRkJkVUpETEZGQlFYWkNPMEZCUTBGSUxHRkJRVXRGTEdOQlFVd3NTVUZCZFVKRExGZEJRVmNzUTBGQmJFTTdRVUZEUVVnc1lVRkJTMFVzWTBGQlRDeEpRVUYxUWtNc1YwRkJWeXhEUVVGc1F6dEJRVU5CU0N4aFFVRkxSU3hqUVVGTUxFbEJRWFZDUXl4WFFVRlhMRU5CUVd4RE8wRkJRMEZJTEdGQlFVdEZMR05CUVV3c1NVRkJkVUpETEZkQlFWY3NRMEZCYkVNN1FVRkRRVWdzWVVGQlMwVXNZMEZCVEN4SlFVRjFRa01zVjBGQlZ5eERRVUZzUXp0QlFVTklPMEZCYWtOeFFpeERRVUZVTEVWQmEwTmtMMElzVTBGc1EyTXNRMEZCYWtJaUxDSm1hV3hsSWpvaVltRnlMV1pwYkd4bFpDNXFjeUlzSW5OdmRYSmpaWE5EYjI1MFpXNTBJanBiSWk4cUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FYRzRnUTI5d2VYSnBaMmgwSUNoaktTQXlNREUzTFRJd01UZ2dXR2xoYldWdUlGbGhhbWtnVTI5bWRIZGhjbVVnUTI4dUxDQk1kR1F1WEc1Y2JpQm9kSFJ3Y3pvdkwzZDNkeTVqYjJOdmN5NWpiMjB2WEc1Y2JpQlFaWEp0YVhOemFXOXVJR2x6SUdobGNtVmllU0JuY21GdWRHVmtMQ0JtY21WbElHOW1JR05vWVhKblpTd2dkRzhnWVc1NUlIQmxjbk52YmlCdlluUmhhVzVwYm1jZ1lTQmpiM0I1WEc0Z2IyWWdkR2hwY3lCemIyWjBkMkZ5WlNCaGJtUWdZWE56YjJOcFlYUmxaQ0JsYm1kcGJtVWdjMjkxY21ObElHTnZaR1VnS0hSb1pTQmNJbE52Wm5SM1lYSmxYQ0lwTENCaElHeHBiV2wwWldRc1hHNGdkMjl5YkdSM2FXUmxMQ0J5YjNsaGJIUjVMV1p5WldVc0lHNXZiaTFoYzNOcFoyNWhZbXhsTENCeVpYWnZZMkZpYkdVZ1lXNWtJRzV2YmkxbGVHTnNkWE5wZG1VZ2JHbGpaVzV6WlZ4dUlIUnZJSFZ6WlNCRGIyTnZjeUJEY21WaGRHOXlJSE52YkdWc2VTQjBieUJrWlhabGJHOXdJR2RoYldWeklHOXVJSGx2ZFhJZ2RHRnlaMlYwSUhCc1lYUm1iM0p0Y3k0Z1dXOTFJSE5vWVd4c1hHNGdibTkwSUhWelpTQkRiMk52Y3lCRGNtVmhkRzl5SUhOdlpuUjNZWEpsSUdadmNpQmtaWFpsYkc5d2FXNW5JRzkwYUdWeUlITnZablIzWVhKbElHOXlJSFJ2YjJ4eklIUm9ZWFFuYzF4dUlIVnpaV1FnWm05eUlHUmxkbVZzYjNCcGJtY2daMkZ0WlhNdUlGbHZkU0JoY21VZ2JtOTBJR2R5WVc1MFpXUWdkRzhnY0hWaWJHbHphQ3dnWkdsemRISnBZblYwWlN4Y2JpQnpkV0pzYVdObGJuTmxMQ0JoYm1RdmIzSWdjMlZzYkNCamIzQnBaWE1nYjJZZ1EyOWpiM01nUTNKbFlYUnZjaTVjYmx4dUlGUm9aU0J6YjJaMGQyRnlaU0J2Y2lCMGIyOXNjeUJwYmlCMGFHbHpJRXhwWTJWdWMyVWdRV2R5WldWdFpXNTBJR0Z5WlNCc2FXTmxibk5sWkN3Z2JtOTBJSE52YkdRdVhHNGdXR2xoYldWdUlGbGhhbWtnVTI5bWRIZGhjbVVnUTI4dUxDQk1kR1F1SUhKbGMyVnlkbVZ6SUdGc2JDQnlhV2RvZEhNZ2JtOTBJR1Y0Y0hKbGMzTnNlU0JuY21GdWRHVmtJSFJ2SUhsdmRTNWNibHh1SUZSSVJTQlRUMFpVVjBGU1JTQkpVeUJRVWs5V1NVUkZSQ0JjSWtGVElFbFRYQ0lzSUZkSlZFaFBWVlFnVjBGU1VrRk9WRmtnVDBZZ1FVNVpJRXRKVGtRc0lFVllVRkpGVTFNZ1QxSmNiaUJKVFZCTVNVVkVMQ0JKVGtOTVZVUkpUa2NnUWxWVUlFNVBWQ0JNU1UxSlZFVkVJRlJQSUZSSVJTQlhRVkpTUVU1VVNVVlRJRTlHSUUxRlVrTklRVTVVUVVKSlRFbFVXU3hjYmlCR1NWUk9SVk5USUVaUFVpQkJJRkJCVWxSSlExVk1RVklnVUZWU1VFOVRSU0JCVGtRZ1RrOU9TVTVHVWtsT1IwVk5SVTVVTGlCSlRpQk9UeUJGVmtWT1ZDQlRTRUZNVENCVVNFVmNiaUJCVlZSSVQxSlRJRTlTSUVOUFVGbFNTVWRJVkNCSVQweEVSVkpUSUVKRklFeEpRVUpNUlNCR1QxSWdRVTVaSUVOTVFVbE5MQ0JFUVUxQlIwVlRJRTlTSUU5VVNFVlNYRzRnVEVsQlFrbE1TVlJaTENCWFNFVlVTRVZTSUVsT0lFRk9JRUZEVkVsUFRpQlBSaUJEVDA1VVVrRkRWQ3dnVkU5U1ZDQlBVaUJQVkVoRlVsZEpVMFVzSUVGU1NWTkpUa2NnUmxKUFRTeGNiaUJQVlZRZ1QwWWdUMUlnU1U0Z1EwOU9Ua1ZEVkVsUFRpQlhTVlJJSUZSSVJTQlRUMFpVVjBGU1JTQlBVaUJVU0VVZ1ZWTkZJRTlTSUU5VVNFVlNJRVJGUVV4SlRrZFRJRWxPWEc0Z1ZFaEZJRk5QUmxSWFFWSkZMbHh1SUNvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3FLaW9xS2lvcUtpb3ZYRzVjYm1OdmJuTjBJR3B6SUQwZ2NtVnhkV2x5WlNnbkxpNHZMaTR2TGk0dkxpNHZMaTR2Y0d4aGRHWnZjbTB2YW5NbktUdGNibU52Ym5OMElHRnpjMlZ0WW14bGNpQTlJSEpsY1hWcGNtVW9KeTR1THpKa0wySmhjaTFtYVd4c1pXUW5LVHRjYm1OdmJuTjBJR1pwYkd4V1pYSjBhV05sYzFkcGRHaHZkWFJEWVd4ak0wUWdQU0J5WlhGMWFYSmxLQ2N1TGk4dUxpOTFkR2xzY3ljcExtWnBiR3hXWlhKMGFXTmxjMWRwZEdodmRYUkRZV3hqTTBRN1hHNWNibU52Ym5OMElIWmxZek1nUFNCall5NTJiV0YwYUM1MlpXTXpPMXh1WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUdwekxtRmtaRzl1S0h0Y2JpQWdJQ0IxY0dSaGRHVlhiM0pzWkZabGNuUnpJQ2h6Y0hKcGRHVXBJSHRjYmlBZ0lDQWdJQ0FnYkdWMElHNXZaR1VnUFNCemNISnBkR1V1Ym05a1pTeGNiaUFnSUNBZ0lDQWdJQ0FnSUdSaGRHRWdQU0J6Y0hKcGRHVXVYM0psYm1SbGNrUmhkR0V1WDJSaGRHRTdYRzVjYmlBZ0lDQWdJQ0FnYkdWMElHMWhkSEpwZUNBOUlHNXZaR1V1WDNkdmNteGtUV0YwY21sNE8xeHVJQ0FnSUNBZ0lDQm1iM0lnS0d4bGRDQnBJRDBnTURzZ2FTQThJRFE3SUdrckt5a2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ2JHVjBJR3h2WTJGc0lEMGdaR0YwWVZ0cElDc2dORjA3WEc0Z0lDQWdJQ0FnSUNBZ0lDQnNaWFFnZDI5eWJHUWdQU0JrWVhSaFcybGRPMXh1SUNBZ0lDQWdJQ0FnSUNBZ2RtVmpNeTUwY21GdWMyWnZjbTFOWVhRMEtIZHZjbXhrTENCc2IyTmhiQ3dnYldGMGNtbDRLVHRjYmlBZ0lDQWdJQ0FnZlZ4dUlDQWdJSDBzWEc1Y2JpQWdJQ0JtYVd4c1FuVm1abVZ5Y3lBb2MzQnlhWFJsTENCeVpXNWtaWEpsY2lrZ2UxeHVJQ0FnSUNBZ0lDQnBaaUFvY21WdVpHVnlaWEl1ZDI5eWJHUk5ZWFJFYVhKMGVTa2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ2RHaHBjeTUxY0dSaGRHVlhiM0pzWkZabGNuUnpLSE53Y21sMFpTazdYRzRnSUNBZ0lDQWdJSDFjYmx4dUlDQWdJQ0FnSUNBdkx5QmlkV1ptWlhKY2JpQWdJQ0FnSUNBZ2JHVjBJR0oxWm1abGNpQTlJSEpsYm1SbGNtVnlMbDl0WlhOb1FuVm1abVZ5TTBRN1hHNGdJQ0FnSUNBZ0lHeGxkQ0J1YjJSbElEMGdjM0J5YVhSbExtNXZaR1U3WEc0Z0lDQWdJQ0FnSUd4bGRDQnZabVp6WlhSSmJtWnZJRDBnWm1sc2JGWmxjblJwWTJWelYybDBhRzkxZEVOaGJHTXpSQ2h1YjJSbExDQmlkV1ptWlhJc0lITndjbWwwWlM1ZmNtVnVaR1Z5UkdGMFlTd2dibTlrWlM1ZlkyOXNiM0l1WDNaaGJDazdYRzVjYmlBZ0lDQWdJQ0FnYkdWMElHbGlkV1lnUFNCaWRXWm1aWEl1WDJsRVlYUmhMRnh1SUNBZ0lDQWdJQ0FnSUNBZ2FXNWthV05sVDJabWMyVjBJRDBnYjJabWMyVjBTVzVtYnk1cGJtUnBZMlZQWm1aelpYUXNYRzRnSUNBZ0lDQWdJQ0FnSUNCMlpYSjBaWGhKWkNBOUlHOW1abk5sZEVsdVptOHVkbVZ5ZEdWNFQyWm1jMlYwTzF4dVhHNGdJQ0FnSUNBZ0lHbGlkV1piYVc1a2FXTmxUMlptYzJWMEt5dGRJRDBnZG1WeWRHVjRTV1E3WEc0Z0lDQWdJQ0FnSUdsaWRXWmJhVzVrYVdObFQyWm1jMlYwS3l0ZElEMGdkbVZ5ZEdWNFNXUWdLeUF4TzF4dUlDQWdJQ0FnSUNCcFluVm1XMmx1WkdsalpVOW1abk5sZENzclhTQTlJSFpsY25SbGVFbGtJQ3NnTWp0Y2JpQWdJQ0FnSUNBZ2FXSjFabHRwYm1ScFkyVlBabVp6WlhRcksxMGdQU0IyWlhKMFpYaEpaQ0FySURFN1hHNGdJQ0FnSUNBZ0lHbGlkV1piYVc1a2FXTmxUMlptYzJWMEt5dGRJRDBnZG1WeWRHVjRTV1FnS3lBek8xeHVJQ0FnSUNBZ0lDQnBZblZtVzJsdVpHbGpaVTltWm5ObGRDc3JYU0E5SUhabGNuUmxlRWxrSUNzZ01qdGNiaUFnSUNCOVhHNTlMQ0JoYzNObGJXSnNaWElwTzF4dUlsMTkiXX0=